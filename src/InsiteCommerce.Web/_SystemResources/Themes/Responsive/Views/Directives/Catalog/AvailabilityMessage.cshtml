<span
    ng-if="availability.messageType != 0 && !availability.requiresRealTimeInventory && !failedToGetRealTimeInventory"
    ng-class='{instock : (availability.messageType == 1), outstock : (availability.messageType == 2), lowstock : (availability.messageType == 3)}'>
    {{availability.message}}
    <a ng-if="availability && vm.showLink(productSettings, page) && !failedToGetRealTimeInventory" ng-click="vm.openPopup(productSettings, productId, unitOfMeasure, configuration)" href="#" class="availability-by-warehouse-link">[% translate 'View Availability by Warehouse' %]</a>
</span>
<span ng-if="availability.requiresRealTimeInventory && !failedToGetRealTimeInventory" class='price-loading-spinner'></span>
<div ng-if="failedToGetRealTimeInventory">
    <span>[% siteMessage 'RealTimeInventory_InventoryLoadFailed' %]</span>
</div>